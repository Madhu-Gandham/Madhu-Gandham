<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://java.sun.com/jsf/facelets">

<h:head>
	<link rel="stylesheet" href="css/bootstrap.css" />

	<script src="js/jquery-3.5.1.min.js"></script>
	<script src="js/bootstrap.min.js"></script>
	<h2 style="text-align: center;">User Registration</h2>
	<link rel="stylesheet"
		href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" />

	<title>User Registration</title>
	<style>
body {
	background-color: #F8F8F8;
}

h1 {
	text-align: center;
	margin-top: 50px;
	margin-bottom: 30px;
}

form {
	width: 100%;
	margin: 0 auto;
	background-color: #fff;
	padding: 30px;
	border-radius: 100px;
	box-shadow: 0px 0px 10px #ccc;
}

.calendar-container {
	position: relative;
}

.calendar-icon {
	position: absolute;
	top: 50%;
	right: 0.5em;
	transform: translateY(-50%);
	pointer-events: none;
	color: #999;
	font-size: 16px;
}

label {
	font-weight: bold;
	font-size: 16px;
}

.back-button, .save-button {
	display: inline-block;
	padding: 10px 20px;
	font-size: 16px;
	text-align: center;
	text-decoration: none;
	width: 150px; /* Adjust the width as needed */
	box-sizing: border-box;
}

.back-button {
	margin-right: 10px; /* Add some spacing between buttons if desired */
}

input[type="text"], input[type="password"] {
	width: 100%;
	padding: 10px;
	margin-bottom: 10px;
	border: none;
	border-radius: 5px;
	box-shadow: 0px 0px 5px #ccc;
}

input[type="submit"] {
	background-color: #007bff;
	color: #fff;
	border: none;
	border-radius: 5px;
	padding: 10px 20px;
	font-size: 16px;
	cursor: pointer;
}

.error {
	color: red;
	margin-bottom: 10px;
}

.success {
	color: green;
	margin-bottom: 10px;
}

.button-container {
	display: flex;
	justify-content: space-between;
}

.save-button, .back-button {
	flex: 1;
}

.input-icon-container {
	display: flex;
	align-items: center;
}

.watermark-icon {
	margin-right: 10px;
	color: red;
}

.input-icon-container {
	display: flex;
	align-items: center;
}

.watermark-icon {
	margin-right: 10px;
	color: red;
}

.input-icon-container {
	display: flex;
	align-items: center;
}

.watermark-icon {
	margin-right: 10px;
	color: red;
}

.calendar-container {
	position: relative;
}

.calendar-icon {
	position: absolute;
	right: 10px;
	top: 50%;
	transform: translateY(-50%);
	color: red;
}

.input-group-text .icon-red {
	color: red;
}
</style>
</h:head>
<h:body onload="onPage()">

	<!-- <ui:include src="Navbar.xhtml" />  -->
	<br />
	<div class="container">
		<div class="row">
			<div class="col-sm-6 mx-auto">
				<h:form id="cregfrm">

					<div class="form-group">
						FirstName:
						<div class="input-icon-container">
							<i class="fa fa-user watermark-icon" aria-hidden="true"></i>
							<h:inputText id="firstname" value="#{Lib.firstname}"
								required="true" class="form-control"
								requiredMessage="Firstname is required"
								validatorMessage="It allows only charcters and accepts Minimum 8 charcters and one Uppercase should be Maintain">
								<f:validateRegex pattern="[A-Z][a-z]+" />
								<f:validateLength minimum="8" maximum="15"></f:validateLength>
							</h:inputText>
						</div>
						<h:message for="firstname" style="color: red;" />
					</div>


					<div class="form-group">
						Phone Number:
						<div class="input-icon-container">
							<i class="fa fa-phone watermark-icon" aria-hidden="true"></i>
							<h:inputText id="phn_num" value="#{Lib.phn_num}"
								class="form-control" required="true"
								requiredMessage="Phone number is mandatory"
								validatorMessage="Number Must be contain 10 digits">
								<f:validateRegex pattern="\d{10}" />
							</h:inputText>
						</div>
						<h:message for="phn_num" style="color: red;" />
					</div>

					<div class="form-group">
						Username:
						<div class="input-icon-container">
							<i class="fa fa-user watermark-icon" aria-hidden="true"></i>
							<h:inputText id="userName" value="#{Lib.userName}"
								required="true" class="form-control"
								requiredMessage="Name is required"
								validatorMessage="It allows only characters and accepts a minimum of 8 characters with at least one uppercase letter">
								<f:validateRegex pattern="(?=.*[A-Z])[A-Za-z]{8,}" />
								<f:validateLength minimum="8" maximum="15" />
							</h:inputText>
						</div>
						<h:message for="userName" style="color: red;" />
					</div>
Password:
<div class="form-group">
						<div class="input-icon-container">
							<i class="fa fa-lock watermark-icon" aria-hidden="true"></i>
							<h:inputSecret id="password" value="#{Lib.password}"
								required="true" label="password" autocomplete="off"
								class="form-control" requiredMessage="Password is required"
								validatorMessage="Password Must be contain at least 8 charcters long,One Uppercase and one Special Charcter">
								<f:validateRegex
									pattern="^(?=.*[0-9])(?=.*[A-Z])(?=.*[!@#$%^*])[a-zA-Z0-9!@#$%^*]{8,}$" />
							</h:inputSecret>
						</div>
						<h:message for="password" style="color: red;" />
					</div>
					<div class="form-group">
						DOB:
						<div class="col">
							<p:calendar id="dob" required="true" mode="popup"
								label="Please Enter Date Of Birth" size="40"
								requiredMessage="Please enter Date of Birth"
								mindate="#{now.minusYears(30)}" value="#{Lib.dob}"
								yearRange="1999:2016" navigator="true" pattern="yyyy-MM-dd">
							</p:calendar>
							<p:watermark for="dob" value="DOB *" />
							<br />
							<h:message for="dob" style="color: red;" />
						</div>
					</div>
					<div class="form-group">
						email:
						<div class="input-icon-container">
							<i class="fa fa-envelope watermark-icon" aria-hidden="true"></i>
							<h:inputText id="user_email" value="#{Lib.email}"
								validator="#{LibraryDAO.validateEmail}" class="form-control"
								required="true" requiredMessage="Enter Email Address" />


						</div>
						<h:message for="user_email" style="color: red;" />
					</div>

					<div class="form-group">
						Security Questions:
						<div class="input-icon-container">
							<i class="fas fa-shield-alt icon-red" aria-hidden="true"></i>
							<h:selectOneMenu id="security_question"
								value="#{Lib.securityQuestion}" class="form-control"
								required="true" requiredMessage="Select Security Question">
								<f:selectItem itemLabel="Select a question" itemValue="" />
								<f:selectItem itemLabel="What is your favorite color?"
									itemValue="color" />
								<f:selectItem itemLabel="What is your pet's name?"
									itemValue="What is your pet's name?" />
								<f:selectItem itemLabel="What is your mother's name?"
									itemValue="What is your mother's name?" />
								<f:selectItem itemLabel="What city were you born in?"
									itemValue="What city were you born in?" />
							</h:selectOneMenu>
						</div>
						<h:message for="security_question" style="color: red;" />
					</div>
					<div class="form-group">
						Security Answer:
						<div class="input-icon-container">
							<i class="fa fa-envelope watermark-icon" aria-hidden="true"></i>
							<h:inputText id="answers" value="#{Lib.answers}"
								class="form-control" required="true"
								requiredMessage="Enter Answers " />
						</div>
						<h:message for="answers" style="color: red;" />
					</div>
					<div class="button-container">
						<h:commandButton class="btn btn-dark save-button" value="Save"
							action="#{LibraryDAO.addUser(Lib.userName,Lib.password,Lib.email,Lib.dob,Lib.firstname,Lib.phn_num,Lib.securityQuestion,Lib.answers)}" />
						<a href="login.jsp" class="btn btn-dark back-button">Back</a>
					</div>
					<h5>
						<h:message for="cregfrm" style="color:black;" />
					</h5>
				</h:form>
			</div>
		</div>
	</div>
</h:body>
</html>
